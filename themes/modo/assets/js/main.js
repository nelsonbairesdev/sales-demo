console.log('This site was generated by Hugo.');

// Smart dropdown positioning
document.addEventListener('DOMContentLoaded', function() {
  const menuItems = document.querySelectorAll('nav.main-menu ul > li');
  
  menuItems.forEach(item => {
    const dropdown = item.querySelector('ul');
    if (dropdown) {
      item.addEventListener('mouseenter', function() {
        positionDropdown(dropdown, item);
      });
    }
  });
  
  function positionDropdown(dropdown, parentItem) {
    const rect = parentItem.getBoundingClientRect();
    const dropdownRect = dropdown.getBoundingClientRect();
    const viewportWidth = window.innerWidth;
    
    // Reset positioning
    dropdown.style.left = '';
    dropdown.style.right = '';
    
    // Check if dropdown would overflow the right edge
    if (rect.left + dropdownRect.width > viewportWidth) {
      dropdown.style.left = 'auto';
      dropdown.style.right = '0';
    }
    
    // For mobile, ensure dropdown doesn't go off-screen
    if (window.innerWidth <= 1024) {
      const dropdownWidth = dropdown.offsetWidth;
      const parentLeft = rect.left;
      
      if (parentLeft + dropdownWidth > viewportWidth) {
        dropdown.style.left = 'auto';
        dropdown.style.right = '0';
      }
    }
  }
  
  // Reposition dropdowns on window resize
  window.addEventListener('resize', function() {
    const activeDropdowns = document.querySelectorAll('nav.main-menu ul ul[style*="display: block"]');
    activeDropdowns.forEach(dropdown => {
      const parentItem = dropdown.parentElement;
      positionDropdown(dropdown, parentItem);
    });
  });
});

// Mobile menu functionality
function toggleMobileMenu() {
  const mobileMenu = document.getElementById('mobileMenu');
  const body = document.body;
  
  if (mobileMenu) {
    const isActive = mobileMenu.classList.contains('active');
    
    if (isActive) {
      mobileMenu.classList.remove('active');
      body.classList.remove('mobile-menu-open');
    } else {
      mobileMenu.classList.add('active');
      body.classList.add('mobile-menu-open');
    }
  }
}

// Close mobile menu when clicking outside
document.addEventListener('click', function(event) {
  const mobileMenu = document.getElementById('mobileMenu');
  const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
  
  if (mobileMenu && mobileMenu.classList.contains('active')) {
    if (!mobileMenu.contains(event.target) && !mobileMenuToggle.contains(event.target)) {
      mobileMenu.classList.remove('active');
      document.body.classList.remove('mobile-menu-open');
    }
  }
});

// Close mobile menu when pressing Escape key
document.addEventListener('keydown', function(event) {
  if (event.key === 'Escape') {
    const mobileMenu = document.getElementById('mobileMenu');
    if (mobileMenu && mobileMenu.classList.contains('active')) {
      mobileMenu.classList.remove('active');
      document.body.classList.remove('mobile-menu-open');
    }
  }
});

// Close mobile menu when clicking on a link
document.addEventListener('DOMContentLoaded', function() {
  const mobileMenuLinks = document.querySelectorAll('.mobile-menu a');
  mobileMenuLinks.forEach(link => {
    link.addEventListener('click', function() {
      const mobileMenu = document.getElementById('mobileMenu');
      if (mobileMenu) {
        mobileMenu.classList.remove('active');
        document.body.classList.remove('mobile-menu-open');
      }
    });
  });
});
